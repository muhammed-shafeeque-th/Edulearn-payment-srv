syntax = "proto3";

package course.quiz;

import "course/common.proto";


// Quiz Messages

message QuestionOption {
  string value = 1;
  bool is_correct = 2;

}

// MCQ Question structure
message Question {
  string id = 9;
  string type = 1;
  optional int32 points = 2;
  optional int32 time_limit = 6;
  string question = 3;
  bool required = 4;
  repeated QuestionOption options = 7;
  optional string correct_answer = 8; // Index of the correct option (0-based)
  optional string explanation = 5; // Optional explanation for the correct answer
}

message CreateQuizRequest {
  string course_id = 1;
  string user_id = 20;
  string section_id = 3;
  optional string description = 9;
  string title = 8;
  bool isRequired = 7;
  int32 time_limit = 4;
  int32 passing_score = 5;
  int32 max_attempts = 2;
  repeated Question questions = 6;
 
}

message GetQuizRequest {
  string quiz_id = 1;
}

message UpdateQuizRequest {
  string quiz_id = 1;
  string course_id = 12;
  string user_id = 20;
  string description = 3;
  string title = 8;
  bool isRequired = 7;
  int32 time_limit = 4;
  int32 passing_score = 5;
  int32 max_attempts = 2;
  repeated Question questions = 6;
}

message DeleteQuizRequest {
  string quiz_id = 1;
  string course_id = 2;
  string user_id = 20;
}

message GetQuizzesByCourseRequest {
  string course_id = 1;
}

message QuizData {
  string id = 1;
  string course_id = 2;
  string section_id = 11;
  string title = 3;
  optional string description = 4;
  int32 time_limit = 5;
  int32 passing_score = 6;
  repeated Question questions = 7;
  string created_at = 8;
  string updated_at = 9;
  optional string deleted_at = 10;
}

message QuizResponse {
  oneof result {
    QuizData quiz = 1;
    course.common.Error error = 2;
  }
}

message QuizzesData {
  repeated QuizData quizzes = 1;
}

message QuizzesResponse {
  oneof result {
    QuizzesData quizzes = 1;
    course.common.Error error = 2;
  }
}

message DeleteQuizResponse {
  oneof result {
    course.common.DeleteSuccess success = 1;
    course.common.Error error = 2;
  }
}